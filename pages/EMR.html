<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../core/style.css">
    <title>Midterm anatomy</title>
</head>
<body>
    <h4 style="font-family: 'Prompt'; position: absolute; bottom: 0; right: 0; margin: 10px;">สารจากรุ่นสู่รุ้น | Dev By TanaTherd</h4>
    <h4 style="font-family: 'Prompt';position: absolute; bottom: 0; left: 0; margin: 10px;"><a href="https://tipme.in.th/hyorick"><img src='../images/coffee.PNG' width="40" height="40"></a></h4>
    <div id="question-container" class="switch-container">
        <div style="position: absolute; top: 10px; right: 10px;">
            <label class="switch">
                <input type="checkbox" id="switch" onclick="toggleBackground()">
                <span class="slider"></span>
            </label>
        </div>

        <div style="font-family: 'Prompt'; position: absolute; bottom: 0; right: 0; margin: 10px; color: rgb(0, 0, 0);">
            <span id="current-question-number">0</span> / <span id="total-questions">0</span>
        </div>

        <p id="question-title">TEST</p>
        <div id="options-container" class="options-container"></div>
        <div id="result" class="result"></div>
    </div>

    <div class="nav-menu">
        <div class="menu-toggle" onclick="toggleMenu()">
            <div class="bar"></div>
            <div class="bar"></div>
            <div class="bar"></div>
        </div>
        <ul class="nav-list">
            <li><a href="../index.html">Midterm</a></li>
            <li><a href="LabPing.html">Lab Ping</a></li>
            <li><a href="EMR.html">EMR</a></li>
        </ul>
    </div>

<!-- ... (HTML และ CSS เดิม) ... -->

<script src="./core/script.js"></script>

<script>

function toggleMenu() {
            const menuToggle = document.querySelector('.menu-toggle');
            const navList = document.querySelector('.nav-list');
            menuToggle.classList.toggle('active');
            navList.classList.toggle('show');
        }
    const questions = [
    { question: "<B>ขณะที่นั่งฟังเพลงใกล้ลำโพงมากเกินไป เกิดอาการหูอื้อ เนื่องจาก โครงสร้างใดถูกกระตุ้นมากเกินไป</B>",options: ["Spiral organ", "Macular utriculi", "Macula sacculi", "Crista ampullaris", "Bulbous corpuscle"], correctAnswer: "Spiral organ" },
        { question: "<b>บริเวณใดของกระดูก humerus ที่มีการหักง่ายที่สุด</b>",options: ["Condyle","Greater tubercle","Head","Surgical neck","Shaft"], correctAnswer: "Surgical neck" },
];
      
    let currentQuestionIndex = -1;

    function shuffleArray(array) {
        return array.sort(() => Math.random() - 0.5);
    }


    function toggleBackground() {
        const switchElement = document.getElementById('switch');
        const options = document.getElementsByClassName('option');

        if (switchElement.checked) {
            // ถ้า switch ถูกเปิด
            for (let i = 0; i < options.length; i++) {
                const option = options[i];
                if (option.textContent === questions[currentQuestionIndex].correctAnswer) {
                    option.classList.add('green-background');
                }
            }
        } else {
            // ถ้า switch ถูกปิด
            for (let i = 0; i < options.length; i++) {
                const option = options[i];
                option.classList.remove('green-background');
            }
        }
    }

    const totalQuestions = questions.length;

function displayQuestion() {
        currentQuestionIndex = (currentQuestionIndex + 1) % totalQuestions;  // ใช้ totalQuestions แทน questions.length
        const currentQuestion = questions[currentQuestionIndex];

    document.getElementById('options-container').innerHTML = '';
    document.getElementById('question-title').innerHTML = currentQuestion.question;
    document.getElementById('current-question-number').textContent = currentQuestionIndex + 1;
        document.getElementById('total-questions').textContent = totalQuestions;  // อัปเดตจำนวนข้อทั้งหมด

    currentQuestion.options = shuffleArray(currentQuestion.options);

    currentQuestion.options.forEach((option, index) => {
        const optionElement = document.createElement('div');
        optionElement.classList.add('option');
        optionElement.textContent = option;
        optionElement.addEventListener('click', () => checkAnswer(index));
        document.getElementById('options-container').appendChild(optionElement);

        // ตรวจสอบถ้าเป็น correctAnswer ให้เพิ่ม class สีเขียวตรงนี้
        if (option === currentQuestion.correctAnswer && document.getElementById('switch').checked) {
            optionElement.classList.add('green-background');
        }
    });


    document.getElementById('result').textContent = '';
}

    function checkAnswer(selectedIndex) {
        const currentQuestion = questions[currentQuestionIndex];
        const correctIndex = currentQuestion.options.findIndex(option => option === currentQuestion.correctAnswer);
        document.getElementById('question-title').innerHTML = currentQuestion.question;

        const resultElement = document.getElementById('result');
        if (selectedIndex === correctIndex) {
            resultElement.textContent = 'Correct!';
            resultElement.classList.remove('incorrect');
            setTimeout(displayQuestion, 1000);
        } else {
            resultElement.textContent = 'Incorrect! Try again.';
            resultElement.classList.add('incorrect');
        }
    }

    // Display the first question
    displayQuestion();



    // ตรวจสอบการเปิด Developer Tools
    function checkDevTools() {
        const isOpen = () => {
            const element = new Image();
            element.__defineGetter__('id', () => {
                console.log('Developer Tools is open!');
                // ทำบางสิ่งที่คุณต้องการทำเมื่อ Developer Tools ถูกเปิด
            });
            console.clear();
            console.log('%c', element);
        };

        setInterval(isOpen, 1000);
    }

    // เรียกใช้งานฟังก์ชัน checkDevTools
    checkDevTools();

</script>



</body>
</html>