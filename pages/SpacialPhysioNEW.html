<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../core/style.css">
    <title>Midterm Physio</title>
</head>

<body>
    <h4 style="font-family: 'Prompt'; position: absolute; bottom: 0; right: 0; margin: 10px;">เรียบเรียงโดยชายฉกรรณ์ทั้ง 7 | Dev By
        TanaTherd</h4>
    <h4 style="font-family: 'Prompt';position: absolute; bottom: 0; left: 0; margin: 10px;"><a
            href="https://tipme.in.th/hyorick" target="_blank"><img src='../images/coffee.PNG' width="40"
                height="40"></a></h4>
    <div id="question-container" class="switch-container">
        <div style="position: absolute; top: 10px; right: 10px;">
            <label class="switch">
                <input type="checkbox" id="switch" onclick="toggleBackground()">
                <span class="slider"></span>
            </label>
        </div>

        <div style="font-family: 'Prompt'; position: absolute; bottom: 0; right: 0; margin: 10px; color: rgb(0, 0, 0);">
            <span id="current-question-number">0</span> / <span id="total-questions">0</span>
        </div>

        <p id="question-title">TEST</p>
        <div id="options-container" class="options-container"></div>
        <div id="result" class="result"></div>
        <button id="back-button"
            style="font-family: 'Prompt'; position: absolute; bottom: 0; left: 10px; margin: 10px; display: none; font-size: 17.25px;"
            onclick="goBack()">Back</button>


    </div>



    <div class="nav-menu">
        <div class="menu-toggle" onclick="toggleMenu()">
            <div class="bar"></div>
            <div class="bar"></div>
            <div class="bar"></div>
        </div>
        <ul class="nav-list">
            <li><a href="Physio.html">Physio</a></li>
        </ul>
    </div>

    <script src="./core/script.js"></script>
    <script>

        let backButtonClicked = false;
        let correctAnswersCount = 0;
        let IncorrectAnswersCount = 0;
        let confettiDisplayed = false;
        function toggleMenu() {
            const menuToggle = document.querySelector('.menu-toggle');
            const navList = document.querySelector('.nav-list');
            menuToggle.classList.toggle('active');
            navList.classList.toggle('show');
        }
        const questions = [
            { question: '<B>ข้อใดถูกต้องเกี่ยวกับ ATP ของกล้ามเนื้อลาย</B>',options: ["ถูกใช้ทั้งระยะที่ทำให้หดตัวและเกิดการการคลายตัว"], correctAnswer: "ถูกใช้ทั้งระยะที่ทำให้หดตัวและเกิดการการคลายตัว" },
            { question: '<B>หน้าที่ของ plasma membrane</B>',options: ["รักษาสมดุลของสาร โดยควบคุมผ่านการเข้าออก"], correctAnswer: "รักษาสมดุลของสาร โดยควบคุมผ่านการเข้าออก" },
            { question: '<B>ข้อใดไม่ใช่อาการของ Heat stroke</B>',options: ["รูมานตาคลายตัว"], correctAnswer: "รูมานตาคลายตัว" },
            { question: '<B>ข้อใดจัดเป็น non-specific</B>',options: ["Temp"], correctAnswer: "Temp" },
            { question: '<B>องค์ประกอบย่อยที่ทำงานร่วมกันของระบบควบคุมร่างกาย Hemeostesis</B>',options: ["positive feedback , negative feedback"], correctAnswer: "positive feedback , negative feedback" },
            { question: '<B>ผู้ป่วยเป็นโรคความดันโลหิตสูง ให้ยา prazosin ออกฤทธิ์จับกับ prazosin ออกฤทธิ์จับกับ receptor</B>',options: [" bata2 adrenergic receptor"], correctAnswer: " bata2 adrenergic receptor" },
            { question: '<B>แพทย์ตรวจผู้ป่วยรายหนึ่งพบ clonus เป็น positive มีความผิดปกติที่ส่วนใด</B>',options: ["UMN"], correctAnswer: "UMN" },
            { question: '<B>การตรวจ deep tendon reflex ที่ kneejerk</B>',options: ["L2 - L4"], correctAnswer: "L2 - L4" },
            { question: '<B>ผู้ป่วยชายไทยอายุ 35 ปี มาพบแพทย์ด้วยอาการไม่สามาฤยืนหลับตาขนาดล้างหน้าได้ ยืนขาถ่าง ถามว่ามีความผิดปกติที่ใด</B>',options: ["แพทย์วินิจฉัยเป็น tabesdorsolis ความผิดปกติอยู่ที่ posterior column in the spinalcord หรือ dorsal column"], correctAnswer: "แพทย์วินิจฉัยเป็น tabesdorsolis ความผิดปกติอยู่ที่ posterior column in the spinalcord หรือ dorsal column" },
            { question: '<B>นิสิตออกไป presents งานหน้าห้อง มีอาการเหงื่อออก หลั่งสารอะไร ระบบไหนทำงาน</B>',options: ["ระบบกล้ามเนื้อ หลั่ง approx. 2"], correctAnswer: "ระบบกล้ามเนื้อ หลั่ง approx. 2" },
            { question: '<B>ในภาวะที่เซลล์กล้ามเนื้อหัวใจตาย cardiac marker ที่สามารถอยู่ได้นานที่สุด</B>',options: ["Troponin"], correctAnswer: "Troponin" },
            { question: '<B>การเพิ่มขึ้นของอะไรที่ทำให้เซลล์กล้ามเนื้อลายหดตัวได้ดี</B>',options: ["atp"], correctAnswer: "atp" },
            { question: '<B>ข้อใดไม่ใช่อาการ heat stork</B>',options: ["ปีรูม่านตาขยาย"], correctAnswer: "ปีรูม่านตาขยาย" },
            { question: '<B>ข้อใดคือหน้าที่ของ คาร์โบไฮเดรตเซน ที่เยื่อหุ้ม cell carbohydrate chain</B>',options: ["cell-cell"], correctAnswer: "cell-cell" },
            { question: '<B>ข้อใดควบคุมแบบ Positive feedback control</B>',options: ["การตกไข่ การคลอด การรวมกลุ่มของเลือด"], correctAnswer: "การตกไข่ การคลอด การรวมกลุ่มของเลือด" },
            { question: '<B>narcrolepsy เกิดจากสาเหตุอะไร</B>',options: ["orexine ลด"], correctAnswer: "orexine ลด" },
            { question: '<B>ถ้าตัด occulomoter ขวาจะส่งผลต่อ pupil light reflex อย่างไร</B>',options: ["ซ้ายหด ขวาไม่หด"], correctAnswer: "ซ้ายหด ขวาไม่หด" },
            { question: '<B>ข้อใดผิดเกี่ยวกับ frost bite</B>',options: ["สามารถเซ็ตเอาcellตายออกได้"], correctAnswer: "สามารถเซ็ตเอาcellตายออกได้" },
            { question: '<B>ตรวจความผิดปกติ</B>',options: ["- Clonus อะไร ข้อเท้า umn<br/>- Babinski's sien อะไร มีการอักเสบของเยื้อหุ้มสมอง"], correctAnswer: "- Clonus อะไร ข้อเท้า umn<br/>- Babinski's sien อะไร มีการอักเสบของเยื้อหุ้มสมอง" },
            { question: '<B>ข้อใดกล่าวถึงหน้าที่โครงสร้างการทำงานของเซลล์กล้ามเนื้อไม่ถูกต้อง</B>',options: ["พอละเหนื่อ"], correctAnswer: "" },
            { question: '<B></B>',options: [""], correctAnswer: "" },
            { question: '<B></B>',options: [""], correctAnswer: "" },
            { question: '<B></B>',options: [""], correctAnswer: "" },
            { question: '<B></B>',options: [""], correctAnswer: "" },
            { question: '<B></B>',options: [""], correctAnswer: "" },
            { question: '<B></B>',options: [""], correctAnswer: "" },
            { question: '<B></B>',options: [""], correctAnswer: "" },
            { question: '<B></B>',options: [""], correctAnswer: "" },
            { question: '<B></B>',options: [""], correctAnswer: "" },
            { question: '<B></B>',options: [""], correctAnswer: "" },
            { question: '<B></B>',options: [""], correctAnswer: "" },
            { question: '<B></B>',options: [""], correctAnswer: "" },
            { question: '<B></B>',options: [""], correctAnswer: "" },
        ];

        let currentQuestionIndex = -1;

        function shuffleArray(array) {
            return array.sort(() => Math.random() - 0.5);
        }


        function toggleBackground() {
            const switchElement = document.getElementById('switch');
            const options = document.getElementsByClassName('option');

            if (switchElement.checked) {
                // ถ้า switch ถูกเปิด
                for (let i = 0; i < options.length; i++) {
                    const option = options[i];
                    if (option.textContent === questions[currentQuestionIndex].correctAnswer) {
                        option.classList.add('green-background');
                    }
                }
            } else {
                // ถ้า switch ถูกปิด
                for (let i = 0; i < options.length; i++) {
                    const option = options[i];
                    option.classList.remove('green-background');
                }
            }
        }

        const totalQuestions = questions.length;

        function displayQuestion() {
            if (backButtonClicked) {
                currentQuestionIndex = (currentQuestionIndex - 1 + totalQuestions) % totalQuestions;
                correctAnswersCount--;
            } else {
                currentQuestionIndex = (currentQuestionIndex + 1) % totalQuestions;  // ใช้ totalQuestions แทน questions.length
                correctAnswersCount++;
            }
            const currentQuestion = questions[currentQuestionIndex];
            backButtonClicked = false; // Reset the flag

            document.getElementById('options-container').innerHTML = '';
            document.getElementById('question-title').innerHTML = currentQuestion.question;
            document.getElementById('current-question-number').textContent = currentQuestionIndex + 1;
            document.getElementById('total-questions').textContent = totalQuestions;  // อัปเดตจำนวนข้อทั้งหมด

            currentQuestion.options = shuffleArray(currentQuestion.options);

            document.getElementById('back-button').style.display = (currentQuestionIndex > 0) ? 'block' : 'none';

            currentQuestion.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.classList.add('option');
                optionElement.textContent = option;
                optionElement.addEventListener('click', () => checkAnswer(index));
                document.getElementById('options-container').appendChild(optionElement);

                // ตรวจสอบถ้าเป็น correctAnswer ให้เพิ่ม class สีเขียวตรงนี้
                if (option === currentQuestion.correctAnswer && document.getElementById('switch').checked) {
                    optionElement.classList.add('green-background');
                }
            });


            document.getElementById('result').textContent = '';
        }



        function checkAnswer(selectedIndex) {
            const currentQuestion = questions[currentQuestionIndex];
            const correctIndex = currentQuestion.options.findIndex(option => option === currentQuestion.correctAnswer);
            document.getElementById('question-title').innerHTML = currentQuestion.question;

            const resultElement = document.getElementById('result');
            if (selectedIndex === correctIndex) {
                resultElement.textContent = 'Correct!';
                resultElement.classList.remove('incorrect');

                if (correctAnswersCount === totalQuestions & IncorrectAnswersCount === 0) {
                    displayCelebration();  // Trigger celebration effect
                } else {
                    setTimeout(displayQuestion, 1000);
                }
            } else {
                resultElement.textContent = 'Incorrect! Try again.';
                resultElement.classList.add('incorrect');
                IncorrectAnswersCount = IncorrectAnswersCount + 1;
            }
        }

        // Display the first question
        displayQuestion();

        function goBack() {
            backButtonClicked = true;
            displayQuestion();
        }


        // ตรวจสอบการเปิด Developer Tools
        function checkDevTools() {
            const isOpen = () => {
                const element = new Image();
                element.__defineGetter__('id', () => {
                    console.log('Developer Tools is open!');
                    // ทำบางสิ่งที่คุณต้องการทำเมื่อ Developer Tools ถูกเปิด
                });
                console.clear();
                console.log('%c', element);
            };

            setInterval(isOpen, 1000);
        }

        // เรียกใช้งานฟังก์ชัน checkDevTools
        checkDevTools();




        // Function เพิ่ม effect Confetti
        function addConfetti() {
            const confettiContainer = document.createElement('div');
            confettiContainer.id = 'confetti-container';
            document.body.appendChild(confettiContainer);

            // สร้าง Confetti
            for (let i = 0; i < 200; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.backgroundColor = getRandomColor();
                confetti.style.left = Math.random() * window.innerWidth + 'px';
                confetti.style.animationDuration = Math.random() * 2 + 1 + 's';
                confetti.style.opacity = Math.random();
                confettiContainer.appendChild(confetti);
            }

            // ลบ Confetti หลังจาก animation เสร็จสิ้น
            setTimeout(() => {
                document.body.removeChild(confettiContainer);
                congratsEffect.style.transition = 'opacity 1s ease-in-out';
                congratsEffect.style.opacity = '0';  // ทำให้ opacity เป็น 0 เพื่อให้หายไป
            }, 15000);
        }

        // Function สุ่มสี
        function getRandomColor() {
            const letters = '0123456789ABCDEF';
            let color = '#';
            for (let i = 0; i < 6; i++) {
                color += letters[Math.floor(Math.random() * 16)];
            }
            return color;
        }

        // Function แสดงประกาศยินดีพร้อม Effect Confetti
        function displayCelebration() {
            // เพิ่ม effect แสดงประกาศยินดี
            const congratsEffect = document.createElement('div');
            congratsEffect.id = 'congratulation-effect';
            congratsEffect.textContent = 'Congratulations!';  // ข้อความประกาศยินดี
            congratsEffect.style.position = 'absolute';
            congratsEffect.style.top = '100px';
            congratsEffect.style.font = 'Prompt';
            document.body.appendChild(congratsEffect);

            // เพิ่ม effect Confetti
            addConfetti();

            setTimeout(() => {
                window.open("https://youtu.be/jSG1hwdST7I?si=xVP3SnqtFz1RfZaE&t=108", '_blank');
            }, 2000);

            // รีเซ็ต correctAnswersCount และ แสดง effect ลงทะเบียน
            setTimeout(() => {
                document.body.removeChild(congratsEffect);
                correctAnswersCount = 0;  // รีเซ็ต correctAnswersCount สำหรับการทดลองในอนาคต
                IncorrectAnswersCount = 0;
                displayQuestion();  // ดำเนินการไปที่คำถามถัดไป
            }, 6000);
        }


    </script>



</body>

</html>