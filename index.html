<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./core/style.css">
    <title>Midterm Cannabis</title>
</head>
<body>
    <h4 style="font-family: 'Prompt'; position: absolute; bottom: 0; right: 0; margin: 10px;">สารจากรุ่นสู่รุ้น | Dev By TanaTherd</h4>
    <h4 style="font-family: 'Prompt';position: absolute; bottom: 0; left: 0; margin: 10px;"><a href="https://tipme.in.th/hyorick" target="_blank"><img src='./images/coffee.PNG' width="40" height="40"></a></h4>
    <div id="question-container" class="switch-container">
        <div style="position: absolute; top: 10px; right: 10px;">
            <label class="switch">
                <input type="checkbox" id="switch" onclick="toggleBackground()">
                <span class="slider"></span>
            </label>
        </div>

        <div style="font-family: 'Prompt'; position: absolute; bottom: 0; right: 0; margin: 10px; color: rgb(0, 0, 0);">
            <span id="current-question-number">0</span> / <span id="total-questions">0</span>
        </div>

        <p id="question-title">TEST</p>
        <div id="options-container" class="options-container"></div>
        <div id="result" class="result"></div>
        <button id="back-button" style="font-family: 'Prompt'; position: absolute; bottom: 0; left: 10px; margin: 10px; display: none; font-size: 17.25px;" onclick="goBack()">Back</button>

        
    </div>



    <div class="nav-menu">
        <div class="menu-toggle" onclick="toggleMenu()">
            <div class="bar"></div>
            <div class="bar"></div>
            <div class="bar"></div>
        </div>
        <ul class="nav-list">
            <li><a href="./index.html">Cannabis</a></li>
        </ul>
    </div>

<!-- ... (HTML และ CSS เดิม) ... -->

<script src="./core/script.js"></script>

<script>

let passwords = ["password1", "password2", "password3"];
let ipAddresses = {};






let backButtonClicked = false;
let correctAnswersCount = 0;  // เพิ่มตัวแปรเก็บจำนวนข้อที่ตอบถูก
let IncorrectAnswersCount = 0;
let confettiDisplayed = false;  // เพิ่มตัวแปรเพื่อตรวจสอบว่า Confetti ถูกแสดงหรือไม่
function toggleMenu() {
            const menuToggle = document.querySelector('.menu-toggle');
            const navList = document.querySelector('.nav-list');
            menuToggle.classList.toggle('active');
            navList.classList.toggle('show');
        }
    const questions = [
//////////////////// ซัน 1-8
//////////////////// บอส 9-17
            { question: "<b> นิยมนำต้นกัญชาอนุบาลในวัสดุปลูกชนิดใด </b>", options: ["พีทมอส","เพอร์ไลต์","เวอร์มิคูไลต์","ขุยมะพร้าว","หินพัมมิช"], correctAnswer: "พีทมอส" },
            { question: "<b> ประเทศที่ปลูกกัญชามากที่สุดคือ </b>", options: ["จีน","อินเดีย","ญี่ปุ่น","อังกฤษ","อเมริกา"], correctAnswer: "อเมริกา" },
            { question: "<b> พระราชบัญญัติยาเสพติดให้โทษพ.ศ. 2522 นี้กำหนดให้ยาเสพติดให้โทษแบ่งออกเป็น 5ประเภท ข้อใดกล่าวถูกต้อง </b>", options: ["ยาเสพติดประเภท 1 เช่น มอร์ฟิน","ยาเสพติดประเภท 2 เช่น เฮโรอีน โคคาอีน","ยาเสพติดประเภท 3 เช่น ยาแก้ไอผสมฝิ่น","ยาเสพติดประเภท 4 เช่น พืชกระท่อม","ยาเสพติดประเภท 5 เช่น กัญชา"], correctAnswer: "ยาเสพติดประเภท 5 เช่น กัญชา" },
/////////////////// จอน 18-26
            { question: '<B>การปลูกกัญชาในข้อใดที่ทำให้ได้ผลผลิตกัญชาที่มีคุณภาพและสม่ำเสมอ</B>',options: ["ปลูกกลางแจ้ง","ปลูกในโรงเรือนอุโมงค์","ปลูกในโรงเรือนพลาสติก","ปลูกในโรงเรือนกลางแจ้ง","ปลูกในโรงเรือนปิด"], correctAnswer: "ปลูกในโรงเรือนปิด" },
            { question: '<B>ตามพระราชบัญญัติยาเสพติดให้โทษ พ.ศ. 2562 การครอบครอง กัญชา ปริมาณเท่าใดจัดว่าเป็นการผลิต นำเข้า หรือส่งออกเพื่อการจำหน่าย</B>',options: ["ตั้งแต่ 10 กิโลกรัมขึ้นไป","ตั้งแต่ 15 กิโลกรัมขึ้นไป","ตั้งแต่ 20 กิโลกรัมขึ้นไป","ตั้งแต่ 25 กิโลกรัมขึ้นไป","ตั้งแต่ 30 กิโลกรัมขึ้นไป"], correctAnswer: "ตั้งแต่ 10 กิโลกรัมขึ้นไป" },
            { question: '<B>สาระสำคัญที่พบในกัญชาเป็นสารออกฤทธิ์ต่อจิตประสาทประเภทใด</B>',options: ["สารกดประสาท","สารเสริมประสาท","สารหลอนประสาท","สารกระตุ้นประสาท","สารยับยั้งประสาท"], correctAnswer: "สารหลอนประสาท" },
            { question: '<B>ปัจจุบันกัญชาถูกจัดเป็นยาเสพติดประเภทใด</B>',options: ["ประเภท 5","ประเภท 4","ประเภท 3","ประเภท 2","ประเภท 1"], correctAnswer: "ประเภท 5" },
            { question: '<B>การปลูกกัญชง พื่อใช้ประโยชน์ทางด้านอุตสาหกรรม กฎหมายกำหนดค่า THC ว่าต้องมีปริมาณตำกว่าที่เปอร์เซ็นต์</B>',options: ["0.1%","0.3%","0.5%","0.7%","1.0%"], correctAnswer: "0.3%" },
            { question: '<B>ข้อใดเป็นการแบ่งชนิดย่อยของกัญชาและกัญชง</B>',options: ["Cannabis Sativa Subsp. Sativa","Cannabis Sativa Subsp. Indica","Cannabis Sativa Subsp. Rudellaris","Cannabis Sativa Subsp. Indicat + Cannabis Sativa Subsp. Rudellaris","ถูกทุกข้อ"], correctAnswer: "ถูกทุกข้อ" },
            { question: '<B>กัญชาพืชเสพติด ตามพระราชบัญญัติยาเสพติดให้โทษ พ.ศ. 2522 เนื่องจากมีสารออกฤทธิ์ต่อจิตประสาท และสารที่ออกฤทธิ์ต่อจิตประสาทคือสารในข้อใด</B>',options: ["CBD","CBN","THC","CBC","CBG"], correctAnswer: "THC" },
            { question: '<B>หากนิสิตม์กัญชวไว้ในครอบครอง จะได้รับโทษทางกฎหมายในข้อใด</B>',options: ["จำคุกไม่เกิน 5 ปี ปรับไม่เกิน 100,000 บาท","จำคุกไม่เกิน 5 ปี ปรับไม่เกิน 150,000 บาท","จำคุกไม่เกิน 10 ปี ปรับไม่เกิน 100,000 บาท","จำคุกไม่เกิน 10 ปี ปรับไม่เกิน 150,000 บาท","จำคุกไม่เกิน 1 ปี ปรับไม่เกิน 100,000 บาท"], correctAnswer: "จำคุกไม่เกิน 5 ปี ปรับไม่เกิน 150,000 บาท" },
            { question: '<B>ข้อใดถูกต้อง</B>',options: ["กัญชาถูกใช้เป็นยาโดย จักรพรรดิ shen Neng แห่งอาณาจักรจีน - (ก)","ศัลยแพทย์ชาวอังกฤษได้ใช้กัญชาเป็นยาชา และยาแก้ปวด - (ข)","ประเทศอาหรับได้เริ่มใช้กระดาษที่ผลิตจากเส้นใยกัญชา - (ค)","ข้อ ก และ ข้อ ข","ถูกทุกข้อ"], correctAnswer: "กัญชาถูกใช้เป็นยาโดย จักรพรรดิ shen Neng แห่งอาณาจักรจีน - (ก)" },
/////////////////// ดิว 27-35
/////////////////// ลี่ 36-44
/////////////////// เซฟ 45-53
/////////////////// โฉ 53-60

    ];
      
    let currentQuestionIndex = -1;

    function shuffleArray(array) {
        return array.sort(() => Math.random() - 0.5);
    }


    function toggleBackground() {
        const switchElement = document.getElementById('switch');
        const options = document.getElementsByClassName('option');

        if (switchElement.checked) {
            // ถ้า switch ถูกเปิด
            for (let i = 0; i < options.length; i++) {
                const option = options[i];
                if (option.textContent === questions[currentQuestionIndex].correctAnswer) {
                    option.classList.add('green-background');
                }
            }
        } else {
            // ถ้า switch ถูกปิด
            for (let i = 0; i < options.length; i++) {
                const option = options[i];
                option.classList.remove('green-background');
            }
        }
    }

    const totalQuestions = questions.length;

    function displayQuestion() {
        if (backButtonClicked) {
            currentQuestionIndex = (currentQuestionIndex - 1 + totalQuestions) % totalQuestions;
            correctAnswersCount--;
        } else {
            currentQuestionIndex = (currentQuestionIndex + 1) % totalQuestions;  // ใช้ totalQuestions แทน questions.length
            correctAnswersCount++;
        }
        const currentQuestion = questions[currentQuestionIndex];     
        backButtonClicked = false; // Reset the flag

        document.getElementById('options-container').innerHTML = '';
        document.getElementById('question-title').innerHTML = currentQuestion.question;
        document.getElementById('current-question-number').textContent = currentQuestionIndex + 1;
            document.getElementById('total-questions').textContent = totalQuestions;  // อัปเดตจำนวนข้อทั้งหมด

        currentQuestion.options = shuffleArray(currentQuestion.options);

        document.getElementById('back-button').style.display = (currentQuestionIndex > 0) ? 'block' : 'none';

        currentQuestion.options.forEach((option, index) => {
            const optionElement = document.createElement('div');
            optionElement.classList.add('option');
            optionElement.textContent = option;
            optionElement.addEventListener('click', () => checkAnswer(index));
            document.getElementById('options-container').appendChild(optionElement);

            // ตรวจสอบถ้าเป็น correctAnswer ให้เพิ่ม class สีเขียวตรงนี้
            if (option === currentQuestion.correctAnswer && document.getElementById('switch').checked) {
                optionElement.classList.add('green-background');
            }
        });


        document.getElementById('result').textContent = '';
    }



    function checkAnswer(selectedIndex) {
    const currentQuestion = questions[currentQuestionIndex];
    const correctIndex = currentQuestion.options.findIndex(option => option === currentQuestion.correctAnswer);
    document.getElementById('question-title').innerHTML = currentQuestion.question;

    const resultElement = document.getElementById('result');
    if (selectedIndex === correctIndex) {
        resultElement.textContent = 'Correct!';
        resultElement.classList.remove('incorrect');

        if (correctAnswersCount === totalQuestions & IncorrectAnswersCount === 0) {
            displayCelebration();  // Trigger celebration effect
        } else {
            setTimeout(displayQuestion, 1000);
        }
    } else {
        resultElement.textContent = 'Incorrect! Try again.';
        resultElement.classList.add('incorrect');
        IncorrectAnswersCount = IncorrectAnswersCount + 1;
    }
}

    // Display the first question
    displayQuestion();

    function goBack() {
        backButtonClicked = true;
            displayQuestion();
    }


    // ตรวจสอบการเปิด Developer Tools
    function checkDevTools() {
        const isOpen = () => {
            const element = new Image();
            element.__defineGetter__('id', () => {
                console.log('Developer Tools is open!');
                // ทำบางสิ่งที่คุณต้องการทำเมื่อ Developer Tools ถูกเปิด
            });
            console.clear();
            console.log('%c', element);
        };

        setInterval(isOpen, 1000);
    }

    // เรียกใช้งานฟังก์ชัน checkDevTools
    checkDevTools();




// Function เพิ่ม effect Confetti
function addConfetti() {
    const confettiContainer = document.createElement('div');
    confettiContainer.id = 'confetti-container';
    document.body.appendChild(confettiContainer);

    // สร้าง Confetti
    for (let i = 0; i < 200; i++) {
        const confetti = document.createElement('div');
        confetti.className = 'confetti';
        confetti.style.backgroundColor = getRandomColor();
        confetti.style.left = Math.random() * window.innerWidth + 'px';
        confetti.style.animationDuration = Math.random() * 2 + 1 + 's';
        confetti.style.opacity = Math.random();
        confettiContainer.appendChild(confetti);
    }

    // ลบ Confetti หลังจาก animation เสร็จสิ้น
    setTimeout(() => {
        document.body.removeChild(confettiContainer);
        congratsEffect.style.transition = 'opacity 1s ease-in-out';
        congratsEffect.style.opacity = '0';  // ทำให้ opacity เป็น 0 เพื่อให้หายไป
    }, 15000);
}

// Function สุ่มสี
function getRandomColor() {
    const letters = '0123456789ABCDEF';
    let color = '#';
    for (let i = 0; i < 6; i++) {
        color += letters[Math.floor(Math.random() * 16)];
    }
    return color;
}

// Function แสดงประกาศยินดีพร้อม Effect Confetti
function displayCelebration() {
    // เพิ่ม effect แสดงประกาศยินดี
    const congratsEffect = document.createElement('div');
    congratsEffect.id = 'congratulation-effect';
    congratsEffect.textContent = 'Congratulations!';  // ข้อความประกาศยินดี
    congratsEffect.style.position = 'absolute';
    congratsEffect.style.top = '100px';
    congratsEffect.style.font = 'Prompt';
    document.body.appendChild(congratsEffect);

    // เพิ่ม effect Confetti
    addConfetti();

    setTimeout(() => {
        window.open("https://youtu.be/jSG1hwdST7I?si=xVP3SnqtFz1RfZaE&t=108", '_blank');
    },2000);

    // รีเซ็ต correctAnswersCount และ แสดง effect ลงทะเบียน
    setTimeout(() => {
        document.body.removeChild(congratsEffect);
        correctAnswersCount = 0;  // รีเซ็ต correctAnswersCount สำหรับการทดลองในอนาคต
        IncorrectAnswersCount = 0;
        displayQuestion();  // ดำเนินการไปที่คำถามถัดไป
    },6000);
}



function authenticate() {
    const passwordInput = prompt("Enter password:");
    const ipAddress = getIpAddress();

    if (passwords.includes(passwordInput)) {
        if (!ipAddresses.hasOwnProperty(passwordInput)) {
            ipAddresses[passwordInput] = ipAddress;
            alert("Authentication successful!");
        } else if (ipAddresses[passwordInput] === ipAddress) {
            alert("Authentication successful!");
        } else {
            alert("Password is already used by another IP address.");
        }
    } else {
        alert("Authentication failed. Invalid password.");
    }
}



function getIpAddress() {
    // ตรวจสอบ IP address ของเครื่องที่ใช้งาน
    // โปรดทราบว่านี้เป็นตัวอย่างเท่านั้น และอาจไม่ทำงานบนทุกๆ เครื่อง
    // ในบางกรณีคุณอาจต้องใช้บริการภายนอกเพื่อดึงข้อมูล IP address
    // เช่น https://api.ipify.org/?format=json
    const ipAddress = "127.0.0.1"; // ให้เปลี่ยนเป็นการดึงจากบริการจริงในการใช้งานจริง
    return ipAddress;
}

// เพิ่ม event listener ที่เรียกใช้ authenticate เมื่อมีคนคลิกที่ลิงก์หรือปุ่มที่เหมาะสม
document.getElementById('login-button').addEventListener('click', authenticate);
 
</script>



</body>
</html>